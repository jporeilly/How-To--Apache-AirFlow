FROM apache/airflow:2.0.1

USER root

# Install environment dependencies
RUN apt-get update \
# xmlstarlet package is required by Airflow to read XML log generated by Carte server running in separate container
    && apt-get install xmlstarlet -y \
# Upgrade PIP
    && pip install --upgrade pip \
# Install project specific packages
    && pip install 'apache-airflow[postgres]'

USER airflow